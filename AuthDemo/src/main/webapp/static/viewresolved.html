<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<body>
<p><button onclick="loadXMLDoc()">Refresh Resolved Info</button></p>

<table id="resolvedlist" border="1">
<tr><th>username</th><th>requestid</th><th>reason</th><th>amount</th><th>status</th><th>managername</th></tr>
</table>

<script>
function loadXMLDoc() {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "http://localhost:8080/AuthDemo/api/reimbursement/getresolved");
  xhr.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      myFunction(this);
    }
  };
  xhr.setRequestHeader("Authorization", sessionStorage.getItem("token"));
  xhr.send();
}

function myFunction(xhr) {
	let resolved = JSON.parse(xhr.response);
    table = "<tr><th>username</th><th>requestid</th><th>reason</th><th>amount</th><th>status</th><th>managername</th></tr>";
    for (i = 0; i < resolved.length; i++) { 
        table += "<tr><td>" + 
        resolved[i].username +
        "</td><td>" +
        resolved[i].id +
        "</td><td>" +
        resolved[i].reason +
        "</td><td>" +
        resolved[i].amount +
        "</td><td>" +
        resolved[i].status +
        "</td><td>" +
        resolved[i].managername +
        "</td></tr>";
     }
     document.getElementById("resolvedlist").innerHTML = table;
}
loadXMLDoc();
</script>
</body>
</html>